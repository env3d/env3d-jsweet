<!DOCTYPE html>
<html lang="en">
  <head>
    <title>c3d Java</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="images/logoFav.jpg" type="image/gif" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
      integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="index.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Nunito&display=swap"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link
      rel="stylesheet"
      href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    />
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-auth.js"></script>
    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyA1bpcO-VCNDyiHJn4hqh6SBzTJsycyUbA",
        authDomain: "c3d-java-dev.firebaseapp.com",
        databaseURL: "https://c3d-java-dev.firebaseio.com",
        projectId: "c3d-java-dev",
        storageBucket: "c3d-java-dev.appspot.com",
        messagingSenderId: "996838444425",
        appId: "1:996838444425:web:d0a183ab914ff516a3a558",
        measurementId: "G-VQZ2CX6FFB",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
      // As httpOnly cookies are to be used, do not persist any state client side.
      firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);
    </script>
  </head>

  <body onload="init();">
    <span id="utilItems">
      <button id="share" title="Share code">
        <i class="fas fa-share-alt"></i>
        <!-- <div class="hint">Share code</div>-->
      </button>
      <button id="reset" title="Reset to default">
        <i class="fa fa-exclamation-triangle"></i>
      </button>
      <button id="consoleToggle" title="Console" onclick="init()">
        <span style="margin-left: 10%;">
          <i id="consoleArrows" class="fas"></i
        ></span>
      </button>
      <button
        id="expandOutputToggle"
        title="Expand"
        onclick="expandOutputToggle()"
      >
        <span>
          <i
            id="consoleArrows"
            style="font-size: 24px; color: white;"
            class="fas fa-expand"
          ></i>
        </span>
      </button>
    </span>
    <button id="run" title="Execute code">
      <i class="fas fa-play"></i>
      <span style="margin-left: 10%;">Run</span>
    </button>
    <div id="loader"></div>
    <button id="makeApp">
      <i class="fas fa-mobile-alt"></i>
      <div class="hint">Make an app from code</div>
    </button>
    <main>
      <nav>
        <ul class="ulNav">
          <li class="liNav">
            <img
              src="images/c3d-logo-extend-invert.png"
              alt="c3d logo"
              class="logo"
            />
          </li>
          <span id="navItems">
            <li class="liNav menu" style="margin-right: 3%;">
              <button
                id="logOut"
                title="Log out"
                class="handleLogOut"
                onclick="logOutWithFirebase()"
              >
                <span> Log Out </span>
              </button>
            </li>
            <li class="liNav menu">
              <button
                id="downloadCode"
                title="Download code"
                class="handleDownloadCode"
                onclick="openDownloadModal()"
              >
                <span> Download</span>
              </button>
            </li>
            <li class="liNav menu">
              <button id="loadCode" title="Load code" class="handleUploadCode">
                <span> Load </span>
              </button>
            </li>
            <li class="liNav menu">
              <a href="#assets">Assets</a>
            </li>
            <li class="liNav menu">
              <a
                target="_blank"
                href="https://java.c3d.io/javadoc/env3d/Env.html"
                >Docs</a
              >
            </li>
            <li class="liNav menu">
              <a id="active" href="#home">Home</a>
            </li>
          </span>
        </ul>
      </nav>
      <span id="status" style="display: none;">ready</span>

      <section id="tabs">
        <div class="addJavaFile">
          <i
            class="fas fa-plus"
            title="Add"
            style="font-size: 1.1em; margin-left: 50%;"
          ></i>
        </div>
      </section>

      <section id="editor"></section>
      <div id="outputContainer">
        <iframe src="env3d.html" id="outputIframe"></iframe>
      </div>
    </main>

    <div id="console"></div>

    <!-- Files -->
    <div id="files">
      <button class="close"><i class="fas fa-times"></i></button>
      <div style="font-family: Nunito, sans-serif;">New class name:</div>
      <input id="filename" />
      <button class="add">Add</button>
      <hr />
      <ul style="list-style-type: none;"></ul>
    </div>

    <!-- The upload file Modal -->
    <div id="uploadModal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
        <div class="modal-header">
          <span id="closeModal" class="close">&times;</span>
        </div>
        <div class="modal-body">
          <div id="upload-container">
            <label for="file-input" id="file-input-label"
              >Choose a C3DJava File</label
            >
            <input type="file" id="file-input" accept="text/plain" />
            <div id="file-progress-container">
              <span id="file-progress-percent"></span>% read
            </div>
            <h3 id="uploadMsg"></h3>
          </div>
        </div>
      </div>
    </div>

    <!-- The download file Modal -->
    <div id="downloadModal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
        <div class="modal-header">
          <span id="closeDownloadModal" class="close">&times;</span>
        </div>
        <div class="modal-body">
          <div id="upload-container">
            <input
              type="text"
              id="downloadFileName"
              placeholder="Enter a file name"
            />
            <button
              title="download code"
              class="downloadCodeBtn"
              onclick="downloadCode()"
            >
              <span> Download</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Reset Warning Modal -->
    <div id="resetModal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
        <div class="modal-header">
          <span id="closeResetModal" class="close">&times;</span>
        </div>
        <div class="modal-body">
          <div id="reset-container">
            <br />
            <h3 style="text-align: center;">
              <i style="color: red;" class="fa fa-exclamation-triangle"></i>
              Clicking on reset will delete all the code!
            </h3>
            <button
              title="download code"
              class="downloadCodeBtn"
              onclick="resetToDefault()"
            >
              <span>Reset</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Signup and Login Tabs -->
    <div class="formContainer" id="authForm">
      <div class="tabs">
        <h3 class="signup-tab">
          <a class="active" href="#signup-tab-content">Sign Up</a>
        </h3>
        <h3 class="login-tab"><a href="#login-tab-content">Login</a></h3>
      </div>
      <!--.tabs-->
      <div class="tabs-content">
        <div id="signup-tab-content" class="active">
          <form
            onsubmit="signUpWithFirebase();return false;"
            class="signup-form"
            method="post"
            id="signupForm"
          >
            <input
              type="email"
              class="input"
              id="user_email"
              autocomplete="off"
              placeholder="Email"
              required
            />
            <input
              type="password"
              class="input"
              id="user_pass"
              autocomplete="off"
              placeholder="Password"
              required
            />
            <input
              type="password"
              class="input"
              id="user_pass_confirm"
              autocomplete="off"
              placeholder="Confirm Password"
              required
            />
            <input type="submit" class="button" value="Sign Up" />
          </form>
          <!--.login-form-->
          <div class="help-text">
            <p>By signing up, you agree to our</p>
            <p>
              <a
                href="https://canada.c3d.io/terms-of-service.html"
                target="_blank"
                >Terms of service</a
              >
            </p>
          </div>
          <!--.help-text-->
        </div>
        <!--.signup-tab-content-->

        <div id="login-tab-content">
          <form
            class="login-form"
            action=""
            method="post"
            onsubmit="loginWithFirebase(); return false;"
            id="loginForm"
          >
            <input
              type="text"
              class="input"
              id="user_login"
              autocomplete="off"
              placeholder="Email"
              required
            />
            <input
              type="password"
              class="input"
              id="user_pass_login"
              autocomplete="off"
              placeholder="Password"
              required
            />
            <!-- <input type="checkbox" class="checkbox" id="remember_me" />
            <label for="remember_me">Remember me</label> -->

            <input type="submit" class="button" value="Login" />
          </form>
          <!--.login-form-->
          <!-- <div class="help-text">
            <p><a href="#">Forget your password?</a></p>
          </div> -->
          <!--.help-text-->
        </div>
        <!--.login-tab-content-->
      </div>
      <!--.tabs-content-->
    </div>
    <!--.form-wrap-->

    <!-- Scripts and Libraries-->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.1/ace.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    <!--
             transpiler service comes from the typescript playground
             https://www.typescriptlang.org/play/index.html

             It"s not documented how to actually do this in the browser,
             so have to look at lots of source code. At the end,
             found out by trail and error that including the
             transcriptServices.js will inject a ts object into the
             window.  You then have to call ts.transpile with the correct
             options to emit the proper results.

             partially based on this blog post:
             http://vanilla-js.blogspot.com/2016/02/how-to-compile-typescript-in-browser.html 
           -->
    <script src="typescriptServices.js"></script>
    <script src="transpile.js"></script>
    <script src="index.js"></script>
    <script src="./handleCode/handleCode.js"></script>
    <script src="./authentication/signup.js"></script>
    <script src="./authentication/login.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->
  </body>
</html>
